{% load static %}
<div class="main-header">

    <!-- Navbar Header -->
    <nav class="navbar navbar-header navbar-expand-lg border-bottom">
      <div class="container-fluid">
        <nav class="navbar navbar-header-left navbar-expand-lg navbar-form nav-search p-0 d-none d-lg-flex">
          <!-- Navigation Toggle Buttons - Solo visible en escritorio -->
          <div class="nav-toggle desktop-only">
            <!-- Botón para minimizar/expandir - Visible siempre en escritorio -->
            <!-- <button class="btn btn-toggle toggle-sidebar" aria-label="Minimizar menú">
                <span class="material-symbols-outlined">chevron_left</span>
            </button> -->
            
            <!-- Botón para ocultar/mostrar - Visible solo cuando no está minimizado en escritorio -->
            <button class="btn btn-toggle sidenav-toggler hide-when-minimized" aria-label="Ocultar menú">
                <span class="material-symbols-outlined">menu_open</span>
            </button>
          </div>
          <div class="input-group">
            <div class="input-group-prepend">
              <button type="submit" class="btn btn-search pe-1">
                <span class="material-symbols-outlined">search</span>
              </button>
            </div>
            <form class="navbar-left navbar-form nav-search">
              <div class="input-group">
                <input type="text" placeholder="Search ..." class="form-control" />
              </div>
            </form>
          </div>
        </nav>

        <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
          <!-- <li>
            <div class="language-switcher">
                <select id="language-select">
                    <option value="es">Español</option>
                    <option value="en">English</option>
                </select>
            </div>
          </li> -->
          <!-- Boton de buscar -->
          <li class="nav-item topbar-icon dropdown hidden-caret d-flex d-lg-none">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" aria-haspopup="true">
              <span class="material-symbols-outlined">search</span>
            </a>
          </li>
          {% if request.user.is_authenticated %}
          <li class="theme-switcher-container">
            <button class="theme-toggle" aria-label="Cambiar tema">
              <span class="material-symbols-outlined">dark_mode</span>
          </button>
          </li>
          <!-- Boton de notificacion de correos -->
          <li class="nav-item topbar-icon dropdown hidden-caret">
            <a class="nav-link dropdown-toggle" href="#" id="messageDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="material-symbols-outlined">mail</span>
            </a>
            <ul class="dropdown-menu messages-notif-box animated fadeIn" aria-labelledby="messageDropdown">
              <li>
                <div class="dropdown-title d-flex justify-content-between align-items-center">
                  Messages
                  <a href="#" class="small">Mark all as read</a>
                </div>
              </li>
              <li>
                <div class="message-notif-scroll scrollbar-outer">
                  <div class="notif-center">
                    <a href="#">
                      <div class="notif-img">
                        <img src="{% static 'assets/img/jm_denis.jpg'%}" alt="Img Profile" />
                      </div>
                      <div class="notif-content">
                        <span class="subject">Jimmy Denis</span>
                        <span class="block"> How are you ? </span>
                        <span class="time">5 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-img">
                        <img src="{% static 'assets/img/chadengle.jpg' %}" alt="Img Profile" />
                      </div>
                      <div class="notif-content">
                        <span class="subject">Chad</span>
                        <span class="block"> Ok, Thanks ! </span>
                        <span class="time">12 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-img">
                        <img src="{% static 'assets/img/mlane.jpg' %}" alt="Img Profile" />
                      </div>
                      <div class="notif-content">
                        <span class="subject">Jhon Doe</span>
                        <span class="block">
                          Ready for the meeting today...
                        </span>
                        <span class="time">12 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-img">
                        <img src="{% static 'assets/img/talha.jpg' %}" alt="Img Profile" />
                      </div>
                      <div class="notif-content">
                        <span class="subject">Talha</span>
                        <span class="block"> Hi, Apa Kabar ? </span>
                        <span class="time">17 minutes ago</span>
                      </div>
                    </a>
                  </div>
                </div>
              </li>
              <li>
                <a class="see-all" href="javascript:void(0);">
                  See all messages<span class="material-symbols-outlined">chevron_right</span>
                </a>
              </li>
            </ul>
          </li>
          <!-- Boton de notificacion de mensajes -->
          <li class="nav-item topbar-icon dropdown hidden-caret">
            <a class="nav-link dropdown-toggle" href="#" id="notifDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="material-symbols-outlined">notifications</span>
              <span class="notification">4</span>
            </a>
            <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
              <li>
                <div class="dropdown-title">
                  You have 4 new notification
                </div>
              </li>
              <li>
                <div class="notif-scroll scrollbar-outer">
                  <div class="notif-center">
                    <a href="#">
                      <div class="notif-icon notif-primary">
                        <span class="material-symbols-outlined">person_add</span>
                      </div>
                      <div class="notif-content">
                        <span class="block"> New user registered </span>
                        <span class="time">5 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-icon notif-success">
                        <span class="material-symbols-outlined">comment</span>
                      </div>
                      <div class="notif-content">
                        <span class="block">
                          Rahmad commented on Admin
                        </span>
                        <span class="time">12 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-img">
                        <img src="{% static 'assets/img/profile2.jpg' %}" alt="Img Profile" />
                      </div>
                      <div class="notif-content">
                        <span class="block">
                          Reza send messages to you
                        </span>
                        <span class="time">12 minutes ago</span>
                      </div>
                    </a>
                    <a href="#">
                      <div class="notif-icon notif-danger">
                        <span class="material-symbols-outlined">favorite</span>
                      </div>
                      <div class="notif-content">
                        <span class="block"> Farrah liked Admin </span>
                        <span class="time">17 minutes ago</span>
                      </div>
                    </a>
                  </div>
                </div>
              </li>
              <li>
                <a class="see-all" href="javascript:void(0);">
                  See all notifications<span class="material-symbols-outlined">chevron_right</span>
                </a>
              </li>
            </ul>
          </li>
          <!-- Boton de notificacion de tareas -->
          <li class="nav-item topbar-icon dropdown hidden-caret">
            <a class="nav-link" data-bs-toggle="dropdown" href="#" aria-expanded="false">
              <span class="material-symbols-outlined">layers</span>
            </a>
            <div class="dropdown-menu quick-actions animated fadeIn">
              <div class="quick-actions-header">
                <span class="title mb-1">Quick Actions</span>
                <span class="subtitle op-7">Shortcuts</span>
              </div>
              <div class="quick-actions-scroll scrollbar-outer">
                <div class="quick-actions-items">
                  <div class="row m-0">
                    <a class="col-6 col-md-4 p-0" href="#">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-danger rounded-circle">
                          <span class="material-symbols-outlined">calendar_month</span>
                        </div>
                        <span class="text">Calendar</span>
                      </div>
                    </a>
                    <a class="col-6 col-md-4 p-0" href="{% url 'notificaciones:email_config_list' %}">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-warning rounded-circle">
                          <span class="material-symbols-outlined">send</span>
                        </div>
                        <span class="text">Configurar notificaciones</span>
                      </div>
                    </a>
                    <a class="col-6 col-md-4 p-0" href="{% url 'notificaciones:sms_config_list' %}">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-info rounded-circle">
                          <span class="material-symbols-outlined">Sms</span>
                        </div>
                        <span class="text">Configurar SMS</span>
                      </div>
                    </a>
                    <a class="col-6 col-md-4 p-0" href="#">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-success rounded-circle">
                          <span class="material-symbols-outlined">mail</span>
                        </div>
                        <span class="text">Emails</span>
                      </div>
                    </a>
                    <a class="col-6 col-md-4 p-0" href="#">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-primary rounded-circle">
                          <span class="material-symbols-outlined">receipt_long</span>
                        </div>
                        <span class="text">Invoice</span>
                      </div>
                    </a>
                    <a class="col-6 col-md-4 p-0" href="#">
                      <div class="quick-actions-item">
                        <div class="avatar-item bg-secondary rounded-circle">
                          <span class="material-symbols-outlined">credit_card</span>
                        </div>
                        <span class="text">Payments</span>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <!-- Boton de usuario -->
          <li class="nav-item topbar-user dropdown hidden-caret">
            <a class="dropdown-toggle profile-pic d-flex align-items-center" data-bs-toggle="dropdown" href="#" aria-expanded="false" id="userDropdown">
              <!-- 1. Imagen (Flex Item 1) -->
              <div class="avatar-sm">
                <img src="{{ request.user.get_image }}" alt="Profile Image" width="60" height="60" class="rounded-circle">
              </div>
              <!-- 2. Contenedor del Nombre (Flex Item 2) - Añadido ms-2 para espacio -->
              <div class="ms-2"> 
                <span class="profile-username">
                  <span class="op-7">Hola,</span>
                  <span class="fw-bold">{{ request.user.first_name }} {{ request.user.last_name }}</span>
                </span>
              </div>
            </a>

            <!-- Dropdown Menu (sin cambios) -->
            <ul class="dropdown-menu dropdown-user animated fadeIn" aria-labelledby="userDropdown">
              <li>
                <div class="user-box">
                  <div class="avatar-lg">
                    <img src="{{ request.user.get_image }}" alt="Imagen de perfil" class="avatar-img" />
                  </div>
                  <div class="u-text">
                    <h4>{{ request.user.first_name }} {{ request.user.last_name }}</h4>
                    <p class="text-muted">{{ request.user.email }}</p>
                    <a href="profile.html" class="btn btn-secondary btn-view-profile">Ver Perfil</a>
                  </div>
                </div>
              </li>
              <li class="dropdown-user-content">
                <a class="dropdown-item" href="#">
                  <span class="material-symbols-outlined">person</span> Mi Perfil
                </a>
                <a class="dropdown-item" href="#">
                  <span class="material-symbols-outlined">inbox</span> Bandeja de entrada
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">
                  <span class="material-symbols-outlined">settings</span> Configuración
                </a>
                <a class="dropdown-item" href="#">
                  <span class="material-symbols-outlined">notifications</span> Notificaciones
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item logout-item" href="{% url 'auth:logout' %}">
                  <span class="material-symbols-outlined">logout</span> Cerrar sesión
                </a>
              </li>
            </ul>
          </li>
          {% endif %}
        </ul>
      </div>
    </nav>
    <!-- End Navbar -->
</div>